/*! Compiled on: 2014-06-05 */
"use strict";define(["modules/app","authenticationFactory"],function(app){app.controllerManager("resetPasswordCtrl",["$scope","$http","$loading","config","$location","authenticationFactory",function($scope,$http,$loading,config,$location,authenticationFactory){$scope.message="Enter a new password to continue.",$scope.close=function(){},$scope.submit=function(){$loading.start();var input=this;return $http({method:"POST",data:{password:input.password,nonce:$location.search().code},url:config.host+"/resetpassword"}).success(function(data){$loading.end(),data.error?($scope.error=!0,$scope.message="Invalid reset code"):(authenticationFactory.openSignInModal({message:"Okay, we've updated your password. You can now login using your new password."}),console.log("open sign in"))}).error(function(){$loading.end(),$scope.error=!0,$scope.message="Invalid reset code"})}}])});